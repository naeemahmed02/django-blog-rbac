{% extends 'main.html' %}

{% block title %}{{ post.title }}{% endblock %}

{% block content %}
<!-- Blog Post Layout -->
<div class="content overflow-hidden bg-white">
  <div class="container px-4 py-5 px-md-5" style="max-width: 900px;">
    <!-- Title + Meta -->
    <div class="pb-4 mb-4 text-center border-bottom">
      <h1 class="fw-bold display-5 mb-3 text-dark">
        {{ post.title }}
      </h1>
      <p class="text-muted small">{{ post.time_to_read }} min read</p>
    </div>

    <!-- Article Content -->
    <div class="article-content fs-6 lh-lg mb-5">
      {{ post.content|safe }}
    </div>

    <!-- Comment Section -->
    <div class="comments-section mt-5">
      <h3 class="h5 fw-bold mb-4">Comments</h3>

      <!-- Add Comment Form -->
      <form method="POST" class="mb-5">
        {% csrf_token %}
        <div class="mb-3">
          <label for="comment" class="form-label">Leave a comment</label>
          {{ form }}
        </div>
        <button type="submit" class="btn btn-success">Post Comment</button>
      </form>

      <!-- Comment List -->
      <div class="comment-list">
        <!-- Example Comment -->
         {% for comment in comments %}
        <div class="d-flex mb-4">
          <img src="https://via.placeholder.com/50" class="rounded-circle me-3" alt="User">
          <div>
            <h6 class="fw-bold mb-1">{{ comment.author.get_full_name }}<small class="text-muted">· {{ comment.created_at|timesince }}</small></h6>
            <p class="mb-2">{{ comment.message }}</p>
            <a href="#" class="text-success small text-decoration-none">Reply</a>

            <!-- Nested Reply -->
            <!-- <div class="d-flex mt-3 ms-4">
              <img src="https://via.placeholder.com/40" class="rounded-circle me-3" alt="User">
              <div>
                <h6 class="fw-bold mb-1">Jane Smith <small class="text-muted">· 1 hour ago</small></h6>
                <p class="mb-2">This is a reply to the comment above.</p>
                <a href="#" class="text-success small text-decoration-none">Reply</a>
              </div>
            </div> -->
          </div>
        </div>

        {% endfor %}
        <!--End comment section-->
        
  </div>
</div>

<!-- Highlight.js JS -->
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
<script>
  hljs.highlightAll();
</script>
{% endblock %}
